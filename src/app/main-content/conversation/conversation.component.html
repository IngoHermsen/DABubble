<div class="card">
    <div class="fixed-header box-shadow">
        @if(viewService.mobileView) {
        <span class="material-icons-round arrow-back" [routerLink]="['/workspace']">arrow_back_ios</span>
        }

        <h2 class="conversation-name">{{ dataService.conversationTitle }}</h2>
    </div>
    <div class="conversation-content">
        <ngx-spinner [disableAnimation]="true" color=#b1b6de bdColor="white" [fullScreen]="false"
            type="ball-scale-pulse"></ngx-spinner>
        <div class="posts" #scroll>
            @if(this.dataService.conversationPostsByDate && this.dataService.conversationPostsByDate.length > 0) {
            @for (dateBlock of dataService.conversationPostsByDate; track $index) {
            <div class="divider">
                <span class="date">{{ dateBlock.date }}</span>
            </div>

            @for (post of dateBlock.posts; let index = $index; track $index) {
            <div class="post-wrapper">
                <app-post [index]="index" [post]="post" [isCommonPost]="true"></app-post>
            </div>
            }
            }
            <div #scrollAnchor></div>
            } @else {
            <div class="empty-placeholder">
                <img src="/assets/images/undraw_typewriter_d4km.png" alt="empty_conversation_placeholder">
            </div>
            }

        </div>
        <div class="message-input">
            <app-message-input (newPost)="addPost($event)"></app-message-input>
        </div>
    </div>

</div>